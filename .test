set -ev

# Let's make sure the generated makefile will actually work...
touch src/*.go
make Makefile

# This is ugly, but I don't know how else to test that installing
# .gotgo files works properly without changing GOROOT or something
# drastic like that...
make install

# FIXME: gotimports seems to now be buggy...
#./bin/gotimports tests/example.go
make -f Makefile.dev test

test -f 'tests/gotgo/slice(int).go'
test -f 'tests/gotgo/slice(list.List).go'
test -f 'tests/test(string).go'

./tests/example

